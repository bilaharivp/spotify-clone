{"ast":null,"code":"var _jsxFileName = \"/home/bilaharivp/spotify (clone)/MusicPlayer_Website_spotify_backend_version/MusicPlayer_Website_spotifyClone-main/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect, useRef } from \"react\";\nimport { Routes, Route, Navigate } from \"react-router-dom\";\nimport { AuthContext, AuthProvider, MusicContext } from \"./Context\";\nimport Signup from \"./components/Signup\";\nimport Signin from \"./components/Signin\";\nimport Home from \"./components/Home\";\nimport PlaybackControl from \"./components/PlaybackControl\";\nimport \"./App.css\"; // Import the CSS file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const {\n    token\n  } = useContext(AuthContext);\n  const {\n    isPlaying,\n    volume\n  } = useContext(MusicContext);\n  const [beatColor, setBeatColor] = useState(\"#1a1a2e\");\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const dataArrayRef = useRef(null);\n  const animationIdRef = useRef(null);\n  const colors = [\"#1a1a2e\",\n  // dark navy\n  \"#16213e\",\n  // dark blue\n  \"#0f3460\",\n  // deep blue\n  \"#533483\",\n  // dark purple\n  \"#6b2d9e\",\n  // purple\n  \"#2d5a6e\",\n  // teal-blue\n  \"#4a1a5c\" // deep purple\n  ];\n\n  const initializeAudioContext = () => {\n    if (audioContextRef.current) return;\n    try {\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      const audioElement = document.querySelector(\"audio\");\n      if (audioElement && audioContext.state !== \"closed\") {\n        const source = audioContext.createMediaElementAudioSource(audioElement);\n        const analyser = audioContext.createAnalyser();\n        analyser.fftSize = 256;\n        source.connect(analyser);\n        analyser.connect(audioContext.destination);\n        audioContextRef.current = audioContext;\n        analyserRef.current = analyser;\n        dataArrayRef.current = new Uint8Array(analyser.frequencyBinCount);\n        startBeatDetection();\n      }\n    } catch (error) {\n      console.log(\"AudioContext not available:\", error);\n    }\n  };\n  useEffect(() => {\n    if (isPlaying && volume > 0) {\n      initializeAudioContext();\n    } else {\n      if (animationIdRef.current) {\n        cancelAnimationFrame(animationIdRef.current);\n        animationIdRef.current = null;\n      }\n    }\n    return () => {\n      if (animationIdRef.current) {\n        cancelAnimationFrame(animationIdRef.current);\n      }\n    };\n  }, [isPlaying, volume, initializeAudioContext]);\n  const startBeatDetection = () => {\n    const updateColor = () => {\n      if (analyserRef.current && dataArrayRef.current) {\n        analyserRef.current.getByteFrequencyData(dataArrayRef.current);\n\n        // Calculate average bass frequency (low frequencies)\n        const bassRange = dataArrayRef.current.slice(0, 8);\n        const bassAvg = bassRange.reduce((a, b) => a + b) / bassRange.length;\n\n        // Calculate average mid frequency\n        const midRange = dataArrayRef.current.slice(8, 32);\n        const midAvg = midRange.reduce((a, b) => a + b) / midRange.length;\n\n        // Calculate average treble frequency\n        const trebleRange = dataArrayRef.current.slice(32, 64);\n        const trebleAvg = trebleRange.reduce((a, b) => a + b) / trebleRange.length;\n\n        // Select color based on dominant frequency\n        let colorIndex = 0;\n        if (bassAvg > 100) {\n          colorIndex = 4; // Purple\n        } else if (midAvg > 80) {\n          colorIndex = 5; // Teal-blue\n        } else if (trebleAvg > 60) {\n          colorIndex = 6; // Deep purple\n        } else {\n          colorIndex = Math.floor((bassAvg + midAvg + trebleAvg) / 180 * colors.length) % colors.length;\n        }\n        setBeatColor(colors[colorIndex]);\n      }\n      animationIdRef.current = requestAnimationFrame(updateColor);\n    };\n    updateColor();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    style: {\n      position: \"relative\",\n      paddingBottom: \"80px\",\n      backgroundColor: beatColor,\n      transition: \"background-color 0.1s ease\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/signup\",\n        element: /*#__PURE__*/_jsxDEV(Signup, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/signin\",\n        element: /*#__PURE__*/_jsxDEV(Signin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PlaybackControl, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"3omigI0WvQz31/udNc02LG/7gEw=\");\n_c = App;\nconst AppWithAuth = () => /*#__PURE__*/_jsxDEV(AuthProvider, {\n  children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 135,\n  columnNumber: 3\n}, this);\n_c2 = AppWithAuth;\nexport default AppWithAuth;\nvar _c, _c2;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"AppWithAuth\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useRef","Routes","Route","Navigate","AuthContext","AuthProvider","MusicContext","Signup","Signin","Home","PlaybackControl","jsxDEV","_jsxDEV","App","_s","token","isPlaying","volume","beatColor","setBeatColor","audioContextRef","analyserRef","dataArrayRef","animationIdRef","colors","initializeAudioContext","current","audioContext","window","AudioContext","webkitAudioContext","audioElement","document","querySelector","state","source","createMediaElementAudioSource","analyser","createAnalyser","fftSize","connect","destination","Uint8Array","frequencyBinCount","startBeatDetection","error","console","log","cancelAnimationFrame","updateColor","getByteFrequencyData","bassRange","slice","bassAvg","reduce","a","b","length","midRange","midAvg","trebleRange","trebleAvg","colorIndex","Math","floor","requestAnimationFrame","className","style","position","paddingBottom","backgroundColor","transition","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","AppWithAuth","_c2","$RefreshReg$"],"sources":["/home/bilaharivp/spotify (clone)/MusicPlayer_Website_spotify_backend_version/MusicPlayer_Website_spotifyClone-main/frontend/src/App.js"],"sourcesContent":["import React, { useContext, useState, useEffect, useRef } from \"react\";\r\nimport { Routes, Route, Navigate } from \"react-router-dom\";\r\nimport { AuthContext, AuthProvider, MusicContext } from \"./Context\";\r\nimport Signup from \"./components/Signup\";\r\nimport Signin from \"./components/Signin\";\r\nimport Home from \"./components/Home\";\r\nimport PlaybackControl from \"./components/PlaybackControl\";\r\nimport \"./App.css\"; // Import the CSS file\r\n\r\nfunction App() {\r\n  const { token } = useContext(AuthContext);\r\n  const { isPlaying, volume } = useContext(MusicContext);\r\n  const [beatColor, setBeatColor] = useState(\"#1a1a2e\");\r\n  const audioContextRef = useRef(null);\r\n  const analyserRef = useRef(null);\r\n  const dataArrayRef = useRef(null);\r\n  const animationIdRef = useRef(null);\r\n\r\n  const colors = [\r\n    \"#1a1a2e\", // dark navy\r\n    \"#16213e\", // dark blue\r\n    \"#0f3460\", // deep blue\r\n    \"#533483\", // dark purple\r\n    \"#6b2d9e\", // purple\r\n    \"#2d5a6e\", // teal-blue\r\n    \"#4a1a5c\", // deep purple\r\n  ];\r\n\r\n  const initializeAudioContext = () => {\r\n    if (audioContextRef.current) return;\r\n\r\n    try {\r\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n      const audioElement = document.querySelector(\"audio\");\r\n\r\n      if (audioElement && audioContext.state !== \"closed\") {\r\n        const source = audioContext.createMediaElementAudioSource(audioElement);\r\n        const analyser = audioContext.createAnalyser();\r\n        analyser.fftSize = 256;\r\n\r\n        source.connect(analyser);\r\n        analyser.connect(audioContext.destination);\r\n\r\n        audioContextRef.current = audioContext;\r\n        analyserRef.current = analyser;\r\n        dataArrayRef.current = new Uint8Array(analyser.frequencyBinCount);\r\n\r\n        startBeatDetection();\r\n      }\r\n    } catch (error) {\r\n      console.log(\"AudioContext not available:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isPlaying && volume > 0) {\r\n      initializeAudioContext();\r\n    } else {\r\n      if (animationIdRef.current) {\r\n        cancelAnimationFrame(animationIdRef.current);\r\n        animationIdRef.current = null;\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (animationIdRef.current) {\r\n        cancelAnimationFrame(animationIdRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying, volume, initializeAudioContext]);\r\n\r\n  const startBeatDetection = () => {\r\n    const updateColor = () => {\r\n      if (analyserRef.current && dataArrayRef.current) {\r\n        analyserRef.current.getByteFrequencyData(dataArrayRef.current);\r\n\r\n        // Calculate average bass frequency (low frequencies)\r\n        const bassRange = dataArrayRef.current.slice(0, 8);\r\n        const bassAvg = bassRange.reduce((a, b) => a + b) / bassRange.length;\r\n\r\n        // Calculate average mid frequency\r\n        const midRange = dataArrayRef.current.slice(8, 32);\r\n        const midAvg = midRange.reduce((a, b) => a + b) / midRange.length;\r\n\r\n        // Calculate average treble frequency\r\n        const trebleRange = dataArrayRef.current.slice(32, 64);\r\n        const trebleAvg = trebleRange.reduce((a, b) => a + b) / trebleRange.length;\r\n\r\n        // Select color based on dominant frequency\r\n        let colorIndex = 0;\r\n        if (bassAvg > 100) {\r\n          colorIndex = 4; // Purple\r\n        } else if (midAvg > 80) {\r\n          colorIndex = 5; // Teal-blue\r\n        } else if (trebleAvg > 60) {\r\n          colorIndex = 6; // Deep purple\r\n        } else {\r\n          colorIndex = Math.floor((bassAvg + midAvg + trebleAvg) / 180 * colors.length) % colors.length;\r\n        }\r\n\r\n        setBeatColor(colors[colorIndex]);\r\n      }\r\n\r\n      animationIdRef.current = requestAnimationFrame(updateColor);\r\n    };\r\n\r\n    updateColor();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"app-container\"\r\n      style={{\r\n        position: \"relative\",\r\n        paddingBottom: \"80px\",\r\n        backgroundColor: beatColor,\r\n        transition: \"background-color 0.1s ease\",\r\n      }}\r\n    >\r\n      <Routes>\r\n        <Route path=\"/signup\" element={<Signup />} />\r\n        <Route path=\"/signin\" element={<Signin />} />\r\n        {/* <Route\r\n          path=\"/\"\r\n          element={token ? <Home /> : <Navigate to=\"/signup\" />}\r\n        /> */}\r\n        <Route path=\"/\" element={<Home />} />\r\n      </Routes>\r\n      <PlaybackControl />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst AppWithAuth = () => (\r\n  <AuthProvider>\r\n    <App />\r\n  </AuthProvider>\r\n);\r\n\r\nexport default AppWithAuth;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}