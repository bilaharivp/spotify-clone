{"ast":null,"code":"class AudioManager {\n  constructor() {\n    if (!AudioManager.instance) {\n      this.audio = new Audio();\n      this.currentSrc = null;\n      this.isPlaying = false;\n      this.subscribers = new Set();\n      this.audio.addEventListener(\"ended\", () => {\n        this.isPlaying = false;\n        this.notifySubscribers();\n      });\n      this.audio.addEventListener(\"error\", e => {\n        console.error(\"Audio playback error:\", e);\n      });\n      AudioManager.instance = this;\n    }\n    return AudioManager.instance;\n  }\n  play(src) {\n    console.log(\"AudioManager: play called with src:\", src);\n    if (this.currentSrc !== src) {\n      this.audio.src = src;\n      this.currentSrc = src;\n    }\n    this.audio.play().catch(err => {\n      console.error(\"Play error:\", err);\n    });\n    this.isPlaying = true;\n    this.notifySubscribers();\n  }\n  pause() {\n    this.audio.pause();\n    this.isPlaying = false;\n    this.notifySubscribers();\n  }\n  toggle(src) {\n    if (this.isPlaying && this.currentSrc === src) {\n      this.pause();\n    } else {\n      this.play(src);\n    }\n  }\n  subscribe(callback) {\n    this.subscribers.add(callback);\n  }\n  unsubscribe(callback) {\n    this.subscribers.delete(callback);\n  }\n  notifySubscribers() {\n    this.subscribers.forEach(callback => callback(this.isPlaying, this.currentSrc));\n  }\n}\nconst instance = new AudioManager();\nexport default instance;","map":{"version":3,"names":["AudioManager","constructor","instance","audio","Audio","currentSrc","isPlaying","subscribers","Set","addEventListener","notifySubscribers","e","console","error","play","src","log","catch","err","pause","toggle","subscribe","callback","add","unsubscribe","delete","forEach"],"sources":["/home/bilaharivp/spotify (clone)/MusicPlayer_Website_spotify_backend_version/MusicPlayer_Website_spotifyClone-main/frontend/src/utils/audioManager.js"],"sourcesContent":["class AudioManager {\n  constructor() {\n    if (!AudioManager.instance) {\n      this.audio = new Audio();\n      this.currentSrc = null;\n      this.isPlaying = false;\n      this.subscribers = new Set();\n\n      this.audio.addEventListener(\"ended\", () => {\n        this.isPlaying = false;\n        this.notifySubscribers();\n      });\n\n      this.audio.addEventListener(\"error\", (e) => {\n        console.error(\"Audio playback error:\", e);\n      });\n\n      AudioManager.instance = this;\n    }\n    return AudioManager.instance;\n  }\n\n  play(src) {\n    console.log(\"AudioManager: play called with src:\", src);\n    if (this.currentSrc !== src) {\n      this.audio.src = src;\n      this.currentSrc = src;\n    }\n    this.audio.play().catch((err) => {\n      console.error(\"Play error:\", err);\n    });\n    this.isPlaying = true;\n    this.notifySubscribers();\n  }\n\n  pause() {\n    this.audio.pause();\n    this.isPlaying = false;\n    this.notifySubscribers();\n  }\n\n  toggle(src) {\n    if (this.isPlaying && this.currentSrc === src) {\n      this.pause();\n    } else {\n      this.play(src);\n    }\n  }\n\n  subscribe(callback) {\n    this.subscribers.add(callback);\n  }\n\n  unsubscribe(callback) {\n    this.subscribers.delete(callback);\n  }\n\n  notifySubscribers() {\n    this.subscribers.forEach((callback) =>\n      callback(this.isPlaying, this.currentSrc)\n    );\n  }\n}\n\nconst instance = new AudioManager();\n\nexport default instance;\n"],"mappings":"AAAA,MAAMA,YAAY,CAAC;EACjBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACD,YAAY,CAACE,QAAQ,EAAE;MAC1B,IAAI,CAACC,KAAK,GAAG,IAAIC,KAAK,EAAE;MACxB,IAAI,CAACC,UAAU,GAAG,IAAI;MACtB,IAAI,CAACC,SAAS,GAAG,KAAK;MACtB,IAAI,CAACC,WAAW,GAAG,IAAIC,GAAG,EAAE;MAE5B,IAAI,CAACL,KAAK,CAACM,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACzC,IAAI,CAACH,SAAS,GAAG,KAAK;QACtB,IAAI,CAACI,iBAAiB,EAAE;MAC1B,CAAC,CAAC;MAEF,IAAI,CAACP,KAAK,CAACM,gBAAgB,CAAC,OAAO,EAAGE,CAAC,IAAK;QAC1CC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,CAAC,CAAC;MAC3C,CAAC,CAAC;MAEFX,YAAY,CAACE,QAAQ,GAAG,IAAI;IAC9B;IACA,OAAOF,YAAY,CAACE,QAAQ;EAC9B;EAEAY,IAAIA,CAACC,GAAG,EAAE;IACRH,OAAO,CAACI,GAAG,CAAC,qCAAqC,EAAED,GAAG,CAAC;IACvD,IAAI,IAAI,CAACV,UAAU,KAAKU,GAAG,EAAE;MAC3B,IAAI,CAACZ,KAAK,CAACY,GAAG,GAAGA,GAAG;MACpB,IAAI,CAACV,UAAU,GAAGU,GAAG;IACvB;IACA,IAAI,CAACZ,KAAK,CAACW,IAAI,EAAE,CAACG,KAAK,CAAEC,GAAG,IAAK;MAC/BN,OAAO,CAACC,KAAK,CAAC,aAAa,EAAEK,GAAG,CAAC;IACnC,CAAC,CAAC;IACF,IAAI,CAACZ,SAAS,GAAG,IAAI;IACrB,IAAI,CAACI,iBAAiB,EAAE;EAC1B;EAEAS,KAAKA,CAAA,EAAG;IACN,IAAI,CAAChB,KAAK,CAACgB,KAAK,EAAE;IAClB,IAAI,CAACb,SAAS,GAAG,KAAK;IACtB,IAAI,CAACI,iBAAiB,EAAE;EAC1B;EAEAU,MAAMA,CAACL,GAAG,EAAE;IACV,IAAI,IAAI,CAACT,SAAS,IAAI,IAAI,CAACD,UAAU,KAAKU,GAAG,EAAE;MAC7C,IAAI,CAACI,KAAK,EAAE;IACd,CAAC,MAAM;MACL,IAAI,CAACL,IAAI,CAACC,GAAG,CAAC;IAChB;EACF;EAEAM,SAASA,CAACC,QAAQ,EAAE;IAClB,IAAI,CAACf,WAAW,CAACgB,GAAG,CAACD,QAAQ,CAAC;EAChC;EAEAE,WAAWA,CAACF,QAAQ,EAAE;IACpB,IAAI,CAACf,WAAW,CAACkB,MAAM,CAACH,QAAQ,CAAC;EACnC;EAEAZ,iBAAiBA,CAAA,EAAG;IAClB,IAAI,CAACH,WAAW,CAACmB,OAAO,CAAEJ,QAAQ,IAChCA,QAAQ,CAAC,IAAI,CAAChB,SAAS,EAAE,IAAI,CAACD,UAAU,CAAC,CAC1C;EACH;AACF;AAEA,MAAMH,QAAQ,GAAG,IAAIF,YAAY,EAAE;AAEnC,eAAeE,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}