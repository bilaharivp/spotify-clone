{"ast":null,"code":"var _jsxFileName = \"/home/bilaharivp/spotify (clone)/MusicPlayer_Website_spotify_backend_version/MusicPlayer_Website_spotifyClone-main/frontend/src/Context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useState, useEffect } from \"react\";\n\n// AuthContext for handling authentication state\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [token, setToken] = useState(null);\n  const [userName, setUserName] = useState(null);\n  const login = newToken => {\n    setToken(newToken);\n    localStorage.setItem(\"authToken\", newToken);\n    fetchUserProfile(newToken);\n  };\n  const logout = () => {\n    setToken(null);\n    setUserName(null);\n    localStorage.removeItem(\"authToken\");\n  };\n  const fetchUserProfile = async authToken => {\n    try {\n      console.log(\"Fetching user profile with token:\", authToken);\n      const response = await fetch(\"http://localhost:5001/user/profile\", {\n        headers: {\n          Authorization: `Bearer ${authToken}`\n        }\n      });\n      console.log(\"User profile response status:\", response.status);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch user profile\");\n      }\n      const data = await response.json();\n      console.log(\"User profile data received:\", data);\n      setUserName(data.firstname || \"User\");\n    } catch (error) {\n      console.error(\"Error fetching user profile:\", error);\n      setUserName(\"User\");\n    }\n  };\n  useEffect(() => {\n    const savedToken = localStorage.getItem(\"authToken\");\n    if (savedToken) {\n      setToken(savedToken);\n      fetchUserProfile(savedToken);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token,\n      userName,\n      login,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n\n// MusicContext for handling music-related state\n_s(AuthProvider, \"LIeGsn2UBy8Mec3zXZ3u551ZK8U=\");\n_c = AuthProvider;\nexport const MusicContext = /*#__PURE__*/createContext();\nexport const MusicProvider = _ref2 => {\n  _s2();\n  let {\n    children\n  } = _ref2;\n  const [isLoading, setIsLoading] = useState(false);\n  const [likedMusic, setLikedMusic] = useState(JSON.parse(localStorage.getItem(\"likedMusic\")) || []);\n  const [pinnedMusic, setPinnedMusic] = useState(JSON.parse(localStorage.getItem(\"pinnedMusic\")) || []);\n  const [resultOffset, setResultOffset] = useState(0);\n  const [tracks, setTracks] = useState([]);\n  const [currentTrackIndex, setCurrentTrackIndex] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(1);\n  const [playlists, setPlaylists] = useState(JSON.parse(localStorage.getItem(\"allPlaylist\")) || {});\n  useEffect(() => {\n    localStorage.setItem(\"likedMusic\", JSON.stringify(likedMusic)); // Sync with localStorage\n  }, [likedMusic]);\n  useEffect(() => {\n    localStorage.setItem(\"pinnedMusic\", JSON.stringify(pinnedMusic)); // Sync with localStorage\n  }, [pinnedMusic]);\n  const togglePlay = () => {\n    setIsPlaying(prev => !prev);\n  };\n  const playNext = () => {\n    setCurrentTrackIndex(prev => tracks.length === 0 ? 0 : (prev + 1) % tracks.length);\n    setCurrentTime(0);\n    setIsPlaying(true);\n  };\n  const playPrev = () => {\n    setCurrentTrackIndex(prev => tracks.length === 0 ? 0 : prev === 0 ? tracks.length - 1 : prev - 1);\n    setCurrentTime(0);\n    setIsPlaying(true);\n  };\n  return /*#__PURE__*/_jsxDEV(MusicContext.Provider, {\n    value: {\n      isLoading,\n      setIsLoading,\n      likedMusic,\n      setLikedMusic,\n      resultOffset,\n      setResultOffset,\n      pinnedMusic,\n      setPinnedMusic,\n      tracks,\n      setTracks,\n      currentTrackIndex,\n      setCurrentTrackIndex,\n      isPlaying,\n      setIsPlaying,\n      currentTime,\n      setCurrentTime,\n      duration,\n      setDuration,\n      volume,\n      setVolume,\n      playlists,\n      setPlaylists,\n      togglePlay,\n      playNext,\n      playPrev\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n\n// Combined ContextProvider to wrap the whole app\n_s2(MusicProvider, \"U40mUM6tPjknwtr4I3GuRIbqRfs=\");\n_c2 = MusicProvider;\nexport const CombinedProvider = _ref3 => {\n  let {\n    children\n  } = _ref3;\n  return /*#__PURE__*/_jsxDEV(AuthProvider, {\n    children: /*#__PURE__*/_jsxDEV(MusicProvider, {\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n};\n_c3 = CombinedProvider;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"AuthProvider\");\n$RefreshReg$(_c2, \"MusicProvider\");\n$RefreshReg$(_c3, \"CombinedProvider\");","map":{"version":3,"names":["createContext","useState","useEffect","jsxDEV","_jsxDEV","AuthContext","AuthProvider","_ref","_s","children","token","setToken","userName","setUserName","login","newToken","localStorage","setItem","fetchUserProfile","logout","removeItem","authToken","console","log","response","fetch","headers","Authorization","status","ok","Error","data","json","firstname","error","savedToken","getItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","MusicContext","MusicProvider","_ref2","_s2","isLoading","setIsLoading","likedMusic","setLikedMusic","JSON","parse","pinnedMusic","setPinnedMusic","resultOffset","setResultOffset","tracks","setTracks","currentTrackIndex","setCurrentTrackIndex","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","volume","setVolume","playlists","setPlaylists","stringify","togglePlay","prev","playNext","length","playPrev","_c2","CombinedProvider","_ref3","_c3","$RefreshReg$"],"sources":["/home/bilaharivp/spotify (clone)/MusicPlayer_Website_spotify_backend_version/MusicPlayer_Website_spotifyClone-main/frontend/src/Context.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\n\r\n// AuthContext for handling authentication state\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [token, setToken] = useState(null);\r\n  const [userName, setUserName] = useState(null);\r\n\r\n  const login = (newToken) => {\r\n    setToken(newToken);\r\n    localStorage.setItem(\"authToken\", newToken);\r\n    fetchUserProfile(newToken);\r\n  };\r\n\r\n  const logout = () => {\r\n    setToken(null);\r\n    setUserName(null);\r\n    localStorage.removeItem(\"authToken\");\r\n  };\r\n\r\n  const fetchUserProfile = async (authToken) => {\r\n    try {\r\n      console.log(\"Fetching user profile with token:\", authToken);\r\n      const response = await fetch(\"http://localhost:5001/user/profile\", {\r\n        headers: {\r\n          Authorization: `Bearer ${authToken}`,\r\n        },\r\n      });\r\n      console.log(\"User profile response status:\", response.status);\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch user profile\");\r\n      }\r\n      const data = await response.json();\r\n      console.log(\"User profile data received:\", data);\r\n      setUserName(data.firstname || \"User\");\r\n    } catch (error) {\r\n      console.error(\"Error fetching user profile:\", error);\r\n      setUserName(\"User\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const savedToken = localStorage.getItem(\"authToken\");\r\n    if (savedToken) {\r\n      setToken(savedToken);\r\n      fetchUserProfile(savedToken);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ token, userName, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\n// MusicContext for handling music-related state\r\nexport const MusicContext = createContext();\r\n\r\nexport const MusicProvider = ({ children }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [likedMusic, setLikedMusic] = useState(\r\n    JSON.parse(localStorage.getItem(\"likedMusic\")) || []\r\n  );\r\n  const [pinnedMusic, setPinnedMusic] = useState(\r\n    JSON.parse(localStorage.getItem(\"pinnedMusic\")) || []\r\n  );\r\n  const [resultOffset, setResultOffset] = useState(0);\r\n\r\n  const [tracks, setTracks] = useState([]);\r\n  const [currentTrackIndex, setCurrentTrackIndex] = useState(0);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(1);\r\n  const [playlists, setPlaylists] = useState(\r\n    JSON.parse(localStorage.getItem(\"allPlaylist\")) || {}\r\n  );\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"likedMusic\", JSON.stringify(likedMusic)); // Sync with localStorage\r\n  }, [likedMusic]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"pinnedMusic\", JSON.stringify(pinnedMusic)); // Sync with localStorage\r\n  }, [pinnedMusic]);\r\n\r\n  const togglePlay = () => {\r\n    setIsPlaying((prev) => !prev);\r\n  };\r\n\r\n  const playNext = () => {\r\n    setCurrentTrackIndex((prev) =>\r\n      tracks.length === 0 ? 0 : (prev + 1) % tracks.length\r\n    );\r\n    setCurrentTime(0);\r\n    setIsPlaying(true);\r\n  };\r\n\r\n  const playPrev = () => {\r\n    setCurrentTrackIndex((prev) =>\r\n      tracks.length === 0 ? 0 : prev === 0 ? tracks.length - 1 : prev - 1\r\n    );\r\n    setCurrentTime(0);\r\n    setIsPlaying(true);\r\n  };\r\n\r\n  return (\r\n    <MusicContext.Provider\r\n      value={{\r\n        isLoading,\r\n        setIsLoading,\r\n        likedMusic,\r\n        setLikedMusic,\r\n        resultOffset,\r\n        setResultOffset,\r\n        pinnedMusic,\r\n        setPinnedMusic,\r\n\r\n        tracks,\r\n        setTracks,\r\n        currentTrackIndex,\r\n        setCurrentTrackIndex,\r\n        isPlaying,\r\n        setIsPlaying,\r\n        currentTime,\r\n        setCurrentTime,\r\n        duration,\r\n        setDuration,\r\n        volume,\r\n        setVolume,\r\n        playlists,\r\n        setPlaylists,\r\n\r\n        togglePlay,\r\n        playNext,\r\n        playPrev,\r\n      }}\r\n    >\r\n      {children}\r\n    </MusicContext.Provider>\r\n  );\r\n};\r\n\r\n// Combined ContextProvider to wrap the whole app\r\nexport const CombinedProvider = ({ children }) => {\r\n  return (\r\n    <AuthProvider>\r\n      <MusicProvider>{children}</MusicProvider>\r\n    </AuthProvider>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}